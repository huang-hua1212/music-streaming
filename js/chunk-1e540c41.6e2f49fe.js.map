{"version":3,"sources":["webpack:///./src/components/CheckoutPaymentDesign_Step1.vue","webpack:///./src/components/CheckoutPaymentDesign_Step1.vue?df81","webpack:///./src/components/CheckoutPaymentDesign_Step1.vue?a9e7"],"names":["style","class","_createElementVNode","_createElementBlock","_Fragment","_renderList","$data","item","key","product","id","src","imageUrl","alt","_toDisplayString","title","price","onClick","$options","_hoisted_12","qty","_hoisted_14","final_total","href","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","type","_createVNode","_component_loading","active","$event","can-cancel","is-full-page","data","isLoading","productsInCart","currentStep","created","this","showLoading","handleCompanyName","loadProductsInCart","mounted","$emit","computed","allTotal","total","reduce","acc","currentValue","accumulator","methods","setTimeout","decrement","it","changeNumInCart","increment","$store","commit","toCheckPaymentStep2","$router","push","axios","get","process","then","res","carts","length","test","cart","product_id","put","deleteProduct","delete","deleteAllProductsInCart","__exports__","render"],"mappings":"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","file":"js/chunk-1e540c41.6e2f49fe.js","sourcesContent":["<template>\n  <div style=\"width: 60%; margin-left: 20%; margin-top: 20vh; height: 40%;\">\n    <div\n      class=\"container\"\n      style=\"border-radius: 5px; background-color: white; padding: 5vh; padding-bottom: 4%\"\n    >\n      <table class=\"table\" style=\"text-align: center\">\n              <!-- <thead>\n                <th>產品名稱</th>\n                <th>售價</th>\n                <th>數量</th>\n                <th>小計</th>\n                <th>變更</th>\n              </thead> -->\n              <tbody>\n                <tr v-for=\"item in productsInCart\" :key=\"item.product.id\">\n                  <td style=\"width: 2vh; padding-left: 11vh\">\n                    <div style=\"width: 8.6vh; padding-top: 2vh; padding-bottom: 2vh\">\n                      <img :src=\"item.product.imageUrl\" style=\"width: 100%\"\n                      alt=\"圖片未加載完成\"/>\n                    </div>\n                  </td>\n                  <td style=\"padding-top: 5vh\">\n                    {{ item.product.title }}\n                  </td>\n                  <td style=\"padding-top: 5vh\">\n                    {{ item.product.price }}\n                  </td>\n                  <td style=\"width: 18vh\">\n                    <div class=\"row\" style=\"padding-left: 4vh; padding-top: 3vh\">\n                      <div class=\"wrapper\">\n                        <span class=\"minus\" @click.prevent=\"decrement(item)\">-</span>\n                        <span class=\"num\">{{ item.qty }}</span>\n                        <span class=\"plus\" @click.prevent=\"increment(item)\">+</span>\n                      </div>\n                    </div>\n                  </td>\n                  <td style=\"padding-top: 4vh\">\n                    <h3>${{ item.final_total }}</h3>\n                    <div>\n                      <a href=\"#\" @click.prevent=\"deleteProduct(item)\">Remove </a>\n                    </div>\n                  </td>\n                </tr>\n              </tbody>\n              <tfoot>\n                <tr>\n                  <td></td>\n                  <td></td>\n                  <td></td>\n                  <td></td>\n                  <td style= 'font-size: 4vh;\n                  padding-right: 10vh;'>總計: ${{allTotal}}</td>\n                </tr>\n              </tfoot>\n            </table>\n            <button\n          type=\"button\"\n          class=\"btn btn-warning\"\n          style=\"float: right; margin-right: 12vh;margin-top: 10%;\n          font-size: 3vh; font-weight: bold;\n          margin-bottom: 10vh;\"\n          @click.prevent=\"toCheckPaymentStep2\"\n        >\n          下一步\n        </button>\n    </div>\n  </div>\n  <!-- show loading -->\n   <div style=\"position: relative\">\n      <loading\n        v-model:active=\"isLoading\"\n        :can-cancel=\"true\"\n        :is-full-page=\"true\"\n      />\n    </div>\n</template>\n<script>\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      productsInCart: [],\n      currentStep: 1,\n    };\n  },\n  created() {\n    this.showLoading();\n    this.handleCompanyName();\n    this.loadProductsInCart();\n  },\n  mounted() {\n    this.$emit('changeCurrentStep', 1);\n  },\n  computed: {\n    allTotal() {\n      // const formatter = new Intl.NumberFormat('en-US', {\n      //   style: 'currency',\n      //   currency: 'USD',\n      // });\n      const total = this.productsInCart.reduce((acc, currentValue) => {\n        let accumulator = acc;\n        accumulator += currentValue.total;\n        return accumulator;\n      }, 0);\n      return total;\n    },\n  },\n  methods: {\n    showLoading() {\n      this.isLoading = true;\n      setTimeout(() => {\n        this.isLoading = false;\n      }, 970);\n    },\n    decrement(it) {\n      const item = it;\n      item.qty -= 1;\n      this.changeNumInCart(item);\n    },\n    increment(it) {\n      const item = it;\n      item.qty += 1;\n      this.changeNumInCart(item);\n    },\n    handleCompanyName() {\n      this.$store.commit('addCompanyId', '西打藍');\n    },\n    toCheckPaymentStep2() {\n      // 跳到步驟二\n      this.$router.push('/checkout-payment-design/checkout-payment-designstep2');\n    },\n    loadProductsInCart() {\n      axios.get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`).then((res) => {\n        this.productsInCart = res.data.data.carts;\n        this.$emit('computProductLength', this.productsInCart.length);\n      });\n    },\n    changeNumInCart(item) {\n      this.test = item;\n      const cart = {\n        product_id: item.product_id,\n        qty: item.qty,\n      };\n      axios\n        .put(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${item.id}`, {\n          data: cart,\n        })\n        .then(() => {\n          this.loadProductsInCart();\n        });\n    },\n    deleteProduct(item) {\n      this.showLoading();\n      axios\n        .delete(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${item.id}`)\n        .then(() => {\n          this.loadProductsInCart();\n        });\n    },\n    deleteAllProductsInCart() {\n      this.showLoading();\n      axios.delete(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/carts`).then(() => {\n        this.loadProductsInCart();\n        // 回到首頁\n        this.$router.push('/');\n      });\n    },\n  },\n};\n</script>\n<style lang= 'scss' scoped>\n@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap');\n.wrapper {\n  height: 6vh; /* 120px */\n  min-width: 15vh; /* 380p */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #fff;\n  border-radius: 12px;\n  box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);\n}\n.wrapper span {\n  width: 100%;\n  text-align: center;\n  font-size: 4vh; /* 55px */\n  font-weight: 600;\n  cursor: pointer;\n  user-select: none;\n}\n.wrapper span.num {\n  font-size: 3vh; /* 50px */\n  border-right: 2px solid rgba(0, 0, 0, 0.2);\n  border-left: 2px solid rgba(0, 0, 0, 0.2);\n  pointer-events: none;\n}\n// modal background color\n.modal-content {\n  background-color: rgb(255, 255, 255);\n  opacity: 0.9;\n}\n</style>\n","import { render } from \"./CheckoutPaymentDesign_Step1.vue?vue&type=template&id=6c58bb48&scoped=true\"\nimport script from \"./CheckoutPaymentDesign_Step1.vue?vue&type=script&lang=js\"\nexport * from \"./CheckoutPaymentDesign_Step1.vue?vue&type=script&lang=js\"\n\nimport \"./CheckoutPaymentDesign_Step1.vue?vue&type=style&index=0&id=6c58bb48&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\hua_8\\\\Desktop\\\\VUE_CLI\\\\music-streaming\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6c58bb48\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./CheckoutPaymentDesign_Step1.vue?vue&type=style&index=0&id=6c58bb48&lang=scss&scoped=true\""],"sourceRoot":""}